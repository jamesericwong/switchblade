<Window x:Class="SwitchBlade.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:SwitchBlade"
        xmlns:core="clr-namespace:SwitchBlade.Core"
        xmlns:components="clr-namespace:SwitchBlade.Views.Components"
        mc:Ignorable="d"
        Title="SwitchBlade" Height="600" Width="800"
        WindowStyle="None"
        AllowsTransparency="False"
        Background="Transparent"
        ResizeMode="CanResize"
        Icon="/Resources/icon.png"
        ShowInTaskbar="{Binding ShowInTaskbar}"
        WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <core:ShortcutVisibilityConverter x:Key="ShortcutVisibilityConverter"/>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility"/>
    </Window.Resources>
    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="28" ResizeBorderThickness="8" GlassFrameThickness="0" CornerRadius="0" />
    </WindowChrome.WindowChrome>

    <!-- Content border - DWM handles rounded corners natively -->
    <Border Background="{DynamicResource WindowBackground}" 
            BorderBrush="{DynamicResource BorderBrush}" 
            BorderThickness="1">
        
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- Drag Bar with Grip Indicator -->
            <Border x:Name="DragBar"
                    Grid.Row="0"
                    Background="Transparent"
                    Height="28"
                    Cursor="Arrow">
                <StackPanel Orientation="Horizontal" 
                            HorizontalAlignment="Center" 
                            VerticalAlignment="Center"
                            Opacity="0.4">
                    <!-- Grip dots indicator -->
                    <TextBlock Text="⋮" 
                               FontSize="12" 
                               Foreground="{DynamicResource ForegroundBrush}" 
                               Margin="1,0"/>
                    <TextBlock Text="⋮" 
                               FontSize="12" 
                               Foreground="{DynamicResource ForegroundBrush}" 
                               Margin="1,0"/>
                    <TextBlock Text="⋮" 
                               FontSize="12" 
                               Foreground="{DynamicResource ForegroundBrush}" 
                               Margin="1,0"/>
                </StackPanel>
            </Border>
            
            <!-- Main Content Grid -->
            <Grid Grid.Row="1" Margin="20,0,20,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" /> <!-- Preview Column -->
            </Grid.ColumnDefinitions>

            <!-- Main Grid content starts here -->
            
            <!-- Main Grid content starts here -->
            
            <!-- Left Pane (Search + Results) -->
            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/> <!-- Search Bar -->
                    <RowDefinition Height="*"/>    <!-- Results -->
                </Grid.RowDefinitions>

                <!-- Search Bar component -->
                <components:SearchBar x:Name="SearchBox" Grid.Row="0"/>

                <!-- Results List component -->
                <components:ResultList x:Name="ResultsConfig" Grid.Row="1" Margin="0,20,0,0"/>

            </Grid>

            <!-- Preview Panel component -->
            <components:PreviewPanel x:Name="PreviewPanel"
                    Grid.Column="1"
                    Width="400"
                    Margin="20,0,0,0"/>

            <!-- Resize Grip (Bottom Right) - Moved to be last child for Z-Index -->
            <Path Data="M16,16 L16,0 L0,16 Z" 
                  Fill="{DynamicResource ForegroundBrush}" 
                  Opacity="0.8"
                  HorizontalAlignment="Right"
                  VerticalAlignment="Bottom"
                  Grid.Column="0"
                  Grid.ColumnSpan="2"
                  Margin="0,0,5,5"
                  Width="16" Height="16"
                  Cursor="SizeNWSE"
                  MouseLeftButtonDown="ResizeGripBottomRight_MouseLeftButtonDown"
                  WindowChrome.IsHitTestVisibleInChrome="True"
                  />
            
            <!-- Resize Grip (Bottom Left) -->
             <Path Data="M0,16 L0,0 L16,16 Z" 
                  Fill="{DynamicResource ForegroundBrush}" 
                  Opacity="0.8"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Bottom"
                  Grid.Column="0"
                  Margin="5,0,0,5"
                  Width="16" Height="16"
                  Cursor="SizeNESW"
                  MouseLeftButtonDown="ResizeGripBottomLeft_MouseLeftButtonDown"
                  WindowChrome.IsHitTestVisibleInChrome="True"
                  />
            </Grid>
        </Grid>
        </Border>
</Window>
